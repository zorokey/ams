<mvc:View
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
    controllerName="emsd.ams.controller.EquipmentList"
    displayBlock="true"
>
    <Page
        id="equipmentListPage"
        title="{i18n>equipmentListTitle}"
        showNavButton="true"
        enableScrolling="true"
    >
        <content>
            <VBox
                id="equipmentListPageContent"
                fitContainer="true"
                height="100%"
            >
                <smartFilterBar:SmartFilterBar
                    id="equipmentSmartFilterBar"
                    entitySet="EquipmentSet"
                    persistencyKey="EquipmentFilterBar"
                    basicSearchFieldName="EquipmentNo,EquipmentDescription,ModelNo,ManufacturerSerialNo"
                    enableBasicSearch="true"
                    considerSelectionVariants="true"
                    useDateRangeType="true"
                >
                    <!-- Annotation-based filters will be loaded automatically -->
                     <!-- Control Configuration -->
                    <!-- <smartFilterBar:controlConfiguration>
                        <smartFilterBar:ControlConfiguration 
                            id="equipmentNoFilterConfig"
                            key="EquipmentNo" 
                            visibleInAdvancedArea="true"
                            preventInitialDataFetchInValueHelpDialog="false"
                            displayBehaviour="descriptionAndId"/>
                        <smartFilterBar:ControlConfiguration 
                            id="equipmentDescriptionFilterConfig"
                            key="EquipmentDescription" 
                            visibleInAdvancedArea="true"/>
                        <smartFilterBar:ControlConfiguration 
                            id="modelNoFilterConfig"
                            key="ModelNo" 
                            visibleInAdvancedArea="true"/>
                        <smartFilterBar:ControlConfiguration 
                            id="manufacturerSerialNoFilterConfig"
                            key="ManufacturerSerialNo" 
                            visibleInAdvancedArea="true"/>
                        <smartFilterBar:ControlConfiguration 
                            id="functionalLocationFilterConfig"
                            key="FunctionalLocation" 
                            visibleInAdvancedArea="true"/>
                        <smartFilterBar:ControlConfiguration 
                            id="userStatusFilterConfig"
                            key="UserStatus" 
                            visibleInAdvancedArea="true"/>
                        <smartFilterBar:ControlConfiguration 
                            id="equipmentTypeFilterConfig"
                            key="EquipmentType" 
                            visibleInAdvancedArea="true"/>
                        <smartFilterBar:ControlConfiguration 
                            id="authorizationGroupFilterConfig"
                            key="AuthorizationGroup" 
                            visibleInAdvancedArea="true"/>
                        <smartFilterBar:ControlConfiguration 
                            id="technicalIdFilterConfig"
                            key="TechnicalId" 
                            visibleInAdvancedArea="true"/>
                        <smartFilterBar:ControlConfiguration 
                            id="plannerGroupFilterConfig"
                            key="PlannerGroup" 
                            visibleInAdvancedArea="true"/>
                        <smartFilterBar:ControlConfiguration 
                            id="mainWorkCenterFilterConfig"
                            key="MainWorkCenter" 
                            visibleInAdvancedArea="true"/>
                        <smartFilterBar:ControlConfiguration 
                            id="divisionFilterConfig"
                            key="Division" 
                            visibleInAdvancedArea="true"/>
                        <smartFilterBar:ControlConfiguration 
                            id="customerFilterConfig"
                            key="Customer" 
                            visibleInAdvancedArea="true"/>
                        <smartFilterBar:ControlConfiguration 
                            id="createdByFilterConfig"
                            key="CreatedBy" 
                            visibleInAdvancedArea="true"/>
                        <smartFilterBar:ControlConfiguration 
                            id="createdOnFilterConfig"
                            key="CreatedOn" 
                            visibleInAdvancedArea="true"/>
                        <smartFilterBar:ControlConfiguration 
                            id="changedByFilterConfig"
                            key="ChangedBy" 
                            visibleInAdvancedArea="true"/>
                        <smartFilterBar:ControlConfiguration 
                            id="changedOnFilterConfig"
                            key="ChangedOn" 
                            visibleInAdvancedArea="true"/>
                    </smartFilterBar:controlConfiguration> -->
                </smartFilterBar:SmartFilterBar>
                <smartTable:SmartTable
                    id="equipmentSmartTable"
                    entitySet="EquipmentSet"
                    smartFilterId="equipmentSmartFilterBar"
                    tableType="ResponsiveTable"
                    useExportToExcel="true"
                    useVariantManagement="true"
                    useTablePersonalisation="true"
                    header="{i18n>equipmentTableTitle}"
                    showRowCount="true"
                    enableAutoBinding="true"
                    persistencyKey="EquipmentSmartTable"
                    class="sapUiResponsiveContentPadding"
                    beforeRebindTable="onBeforeRebindTable"
                    initiallyVisibleFields="EquipmentNo,EquipmentDescription,ModelNo,ManufacturerSerialNo,FunctionalLocation,UserStatus"
                    demandPopin="true"
                    showFullScreenButton="true"
                >
                    <smartTable:customToolbar>
                        <OverflowToolbar id="equipmentTableToolbar">
                            <ToolbarSpacer id="equipmentTableToolbarSpacer" />
                            <!-- Mass Update Button Group -->
                            <MenuButton
                                id="massUpdateMenuButton"
                                text="{i18n>massUpdateText}"
                                type="Default"
                                enabled="{= ${equipmentSmartTable>/selectedContexts}.length > 0 }"
                            >
                                <menu>
                                    <Menu id="massUpdateMenu">
                                        <items>
                                            <MenuItem
                                                id="updateCostCenterMenuItem"
                                                text="{i18n>updateCostCenterText}"
                                                press="onUpdateCostCenter"
                                            />
                                            <MenuItem
                                                id="updateUserStatusMenuItem"
                                                text="{i18n>updateUserStatusText}"
                                                press="onUpdateUserStatus"
                                            />
                                        </items>
                                    </Menu>
                                </menu>
                            </MenuButton>

                            <!-- Template Actions Menu Button -->
                            <MenuButton
                                id="templateActionsMenuButton"
                                text="{i18n>templateActionsText}"
                                type="Default"
                            >
                                <menu>
                                    <Menu id="templateActionsMenu">
                                        <items>
                                            <MenuItem
                                                id="generateBlankMenuItem"
                                                text="{i18n>generateBlankText}"
                                                press="onGenerateBlank"
                                            />
                                            <MenuItem
                                                id="generateWithDataMenuItem"
                                                text="{i18n>generateWithDataText}"
                                                press="onGenerateWithData"
                                            />
                                            <MenuItem
                                                id="uploadMenuItem"
                                                text="{i18n>uploadText}"
                                                press="onUpload"
                                            />
                                        </items>
                                    </Menu>
                                </menu>
                            </MenuButton>
                            <Button
                                id="createEquipmentButton"
                                text="{i18n>createButtonText}"
                                type="Emphasized"
                                press="onCreateEquipment"
                            />
                        </OverflowToolbar>
                    </smartTable:customToolbar>
                </smartTable:SmartTable>
            </VBox>
        </content>
    </Page>
</mvc:View>
